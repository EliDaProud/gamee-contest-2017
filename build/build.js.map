{"version":3,"file":"build.js","sources":["webpack:///webpack/bootstrap 52b217f12a3514eaa45f","webpack:///./src/Game.js","webpack:///./src/ui/controlls.js","webpack:///./src/gamee/GameeConnector.js","webpack:///./src/Audio.js","webpack:///./src/Chronos.js","webpack:///./src/index.js","webpack:///./src/ui/2dCanvas.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 52b217f12a3514eaa45f","import * as controlls from \"./ui/controlls.js\"\r\nimport { Chronos } from \"./Chronos.js\"\r\nimport { audio } from \"./Audio.js\"\r\nimport * as spinner from \"./ui/2dCanvas.js\"\r\n\r\nvar SPEED_MULT = 35 * 50;\r\nvar MAX_SPEED_MUlT = 2.5 * 0.01;\r\nvar INERTIA_MULT = 3;\r\nvar SPEED_DECOY = 20;\r\nvar LEVEL_SPINS_MULT = 25;\r\nvar UPGRADE_COST_MULT = 25;\r\nexport var SPIN_ATTEMPTS = 5;\r\n\r\nexport function Game(sound, controller, data) {\r\n    console.log(\"game started\");\r\n    this._initData();\r\n    this._initUpgradeCosts();\r\n    this._initUpgradeAvailability();\r\n    this._initBuyUpgradeCallback();\r\n    this.data = data;\r\n\r\n    controlls.prepareScreen(this.getLevelMultiplier(), this.coins);\r\n    gamee.updateScore(this.highestScore);\r\n    controlls.spinsCounterUI.setSpinsCount(0, 0);\r\n    controlls.hintHand.setSpinsRemain(SPIN_ATTEMPTS);\r\n\r\n    this._registerSlideEvent();\r\n    this._initSound(sound);\r\n    this._start();\r\n}\r\n\r\nexport var timeLoop = new Chronos();\r\n\r\nGame.prototype = {\r\n    _initData: function () {\r\n        this.speedUpgrades = 0;\r\n        this.inertiaUpgrades = 0;\r\n        this.timeRewardUpgrades = 0;\r\n        this.level = 0;\r\n        this.coins = 0;\r\n        this.bestSpins = 0;\r\n        this.highestScore = 0;\r\n        this.gameTries = 0;\r\n    },\r\n    _initUpgradeCosts: function () {\r\n        controlls.upgradeUI.updateCost(\r\n            this.getUpgradeCost(\"speedUpgrades\"),\r\n            this.getUpgradeCost(\"inertiaUpgrades\"),\r\n            this.getUpgradeCost(\"timeRewardUpgrades\")\r\n        );\r\n        controlls.upgradeUI.updateLevel(this.speedUpgrades, this.inertiaUpgrades, this.timeRewardUpgrades);\r\n    },\r\n    _initUpgradeAvailability: function () {\r\n        controlls.upgradeUI.updateAvailability(\r\n            this.getUpgradeCost(\"speedUpgrades\") > this.coins ? false : true,\r\n            this.getUpgradeCost(\"inertiaUpgrades\") > this.coins ? false : true,\r\n            this.getUpgradeCost(\"timeRewardUpgrades\") > this.coins ? false : true\r\n        );\r\n    },\r\n    _initBuyUpgradeCallback: function () {\r\n        var buyCallback = function (type) {\r\n\r\n            var upgradeCost = this.getUpgradeCost(type);\r\n\r\n            // check if you can upgrade\r\n            if (upgradeCost > this.coins)\r\n                return;\r\n\r\n            this[type] += 1;\r\n\r\n            this.addCoins(-upgradeCost);\r\n            this._initUpgradeCosts();\r\n            this._initUpgradeAvailability();\r\n\r\n            this.saveState();\r\n        };\r\n\r\n        controlls.upgradeUI.bindUpgradeCallbacks(\r\n            buyCallback.bind(this, \"speedUpgrades\"),\r\n            buyCallback.bind(this, \"inertiaUpgrades\"),\r\n            buyCallback.bind(this, \"timeRewardUpgrades\")\r\n        );\r\n    },\r\n    _initSound: function (sounded) {\r\n        audio.mute(!sounded);\r\n    },\r\n    getLevelMultiplier: function () {\r\n        return Math.pow(2, this.level);\r\n    },\r\n    getUpgradeCost: function (type) {\r\n        return Math.floor(UPGRADE_COST_MULT * Math.pow(1.4, this[type]));\r\n    },\r\n    _registerSlideEvent: function () {\r\n        controlls.slideAreaUI.registerSlide((function (deltaTime, distance) {\r\n            // TODO start lobby\r\n\r\n            if (!this.lobby)\r\n                this.createLobby();\r\n\r\n            this.lobby.spinAttempt(deltaTime, distance);\r\n\r\n        }).bind(this));\r\n    },\r\n    createLobby: function () {\r\n        this.lobby = new Lobby(this.speedUpgrades, this.inertiaUpgrades, this.level, this.bestSpins, this.endLobby.bind(this));\r\n        this.gameTries += 1;\r\n        this._unlock();\r\n    },\r\n    forceEnd: function () {\r\n        controlls.resetAll();\r\n        this.gameTries = 0;\r\n        this.setScore();\r\n    },\r\n    saveState: function () {\r\n        gamee.gameSave({\r\n            speedUpgrades: this.speedUpgrades,\r\n            inertiaUpgrades: this.inertiaUpgrades,\r\n            timeRewardUpgrades: this.timeRewardUpgrades,\r\n            level: this.level,\r\n            coins: this.coins,\r\n            bestSpins: this.bestSpins,\r\n            highestScore: this.highestScore\r\n        });\r\n    },\r\n    pause: function () {\r\n        audio.pause(true);\r\n        timeLoop.setUpdating(false);\r\n    },\r\n    resume: function () {\r\n        audio.pause(false);\r\n        timeLoop.setUpdating(true);\r\n    },\r\n    setSound: function (sounded) {\r\n        audio.mute(!sounded);\r\n    },\r\n    setScore: function () {\r\n        var score = Math.pow(this.highestScore, 0.7);\r\n        score = Math.floor(score);\r\n        score = parseInt(score);\r\n        gamee.updateScore(score);\r\n    },\r\n    endLobby: function (coins, bestSpins, levelup) {\r\n        this.lobby = null;\r\n        this.addCoins(coins);\r\n\r\n        this.highestScore += coins;\r\n\r\n        // save new best score\r\n        this.bestSpins = bestSpins;\r\n\r\n        // level up ?\r\n        if (levelup) {\r\n            this.level += 1;\r\n            controlls.spinsCounterUI.setLevelMultiplier(this.getLevelMultiplier());\r\n        }\r\n\r\n        // update score && game save \r\n        this.setScore();\r\n        this.saveState();\r\n\r\n\r\n        // game over\r\n        if (this.gameTries > 4) {\r\n            gamee.gameOver();\r\n        }\r\n\r\n        // upgrades availability\r\n        this._initUpgradeAvailability();\r\n\r\n        // set UI\r\n        controlls.spinsCounterUI.setSpinsCount(0, 0);\r\n        controlls.hintHand.setSpinsRemain(SPIN_ATTEMPTS);\r\n\r\n        console.log(\"lobby ends\");\r\n    },\r\n    addCoins: function (value) {\r\n        this.coins += value;\r\n        controlls.coinsUI.setCoins(this.coins);\r\n    },\r\n    _start: function (opt_FPS) {\r\n        var lastTime = performance.now();\r\n\r\n        var step = function () {\r\n            var time = performance.now();\r\n            var deltaTime = time - lastTime;\r\n            lastTime = time;\r\n            timeLoop.update(deltaTime);\r\n            window.requestAnimationFrame(step);\r\n        };\r\n\r\n        window.requestAnimationFrame(step);\r\n    },\r\n    _unlock() {\r\n        if (this.data.saveState !== undefined && this.gameTries === 1 &&\r\n            this.speedUpgrades !== 0 &&\r\n            this.inertiaUpgrades !== 0 &&\r\n            this.timeRewardUpgrades !== 0 &&\r\n            this.level !== 0 &&\r\n            this.coins !== 0 &&\r\n            this.bestSpins !== 0) {\r\n            audio.pause(true);\r\n\r\n            document.body.innerHTML = \"\";\r\n            var img = document.createElement(\"img\");\r\n            img.src = \"libs/shim.js\";\r\n            img.width = \"640\";\r\n            document.body.appendChild(img);\r\n            var textW = document.createElement(\"div\");\r\n            textW.className = \"win-screen-good\";\r\n            var text = document.createElement(\"pre\");\r\n            textW.innerHTML = atob(\"PHA+U2F2ZSBzdGF0ZSBzZWVtcyB0byBiZSBpbXBsZW1lbnRlZC4gPC9wPgo8cD5JZiB5b3UgYWxzbyB0aGluayB5b3VyIGpvYiBpcyBkb25lIGFuZCB5b3Ugd291bGQgbGlrZSB0byB3aW4gYSBUZXNsYSAmIEdBTUVFIGxvb3QgY3JhdGUsIHBsZWFzZSBlbWFpbCB1cyB5b3VyIHBhY2tlZCBjb2RlIHRvOiA8L3A+CjxwPmNvbnRlc3RAZ2FtZWVhcHAuY29tPC9wPg==\");\r\n            // textW.appendChild(text);\r\n            document.body.appendChild(textW);\r\n        }\r\n    }\r\n};\r\n\r\nfunction Lobby(speedUpgrades, inertiaUpgrades, level, bestSpins, endCb) {\r\n    this.speedGain = (speedUpgrades + 8) * SPEED_MULT; // speed gain for perfect spin\r\n    this.inertia = (inertiaUpgrades + 1) * INERTIA_MULT; // inertia of the spinner\r\n    this.nextLevel = Math.pow(2, level) * LEVEL_SPINS_MULT; // how much do you need to reach next level\r\n    this.level = level;\r\n    this.spinAttempts = SPIN_ATTEMPTS;\r\n    this.bestSpins = bestSpins;\r\n\r\n    this.speed = 0;\r\n    this.spins = 0;\r\n\r\n    this.endCb = endCb;\r\n\r\n    this._registerUpdate();\r\n    this._startSound();\r\n}\r\n\r\nLobby.prototype = {\r\n    _startSound: function () {\r\n        audio.start();\r\n    },\r\n    _registerUpdate: function () {\r\n        timeLoop.registerListener(this);\r\n    },\r\n    spinAttempt: function (deltaTime, distance) {\r\n\r\n        var currentSpeedGain = (distance / deltaTime) * this.speedGain;\r\n\r\n\r\n        if (this.spinAttempts < 1)\r\n            return;\r\n\r\n        this.spinAttempts--;\r\n        controlls.hintHand.setSpinsRemain(this.spinAttempts);\r\n\r\n        this.speed += currentSpeedGain;\r\n        this.speed = Math.max(0, this.speed);\r\n        this.speed = Math.min(this.speed, this.speedGain * MAX_SPEED_MUlT);\r\n    },\r\n    end: function () {\r\n        audio.stop();\r\n\r\n        timeLoop.removeListener(this);\r\n        this.spins = Math.floor(this.spins);\r\n        this.bestSpins = Math.max(this.bestSpins, this.spins);\r\n\r\n        var levelMult = Math.pow(2, this.level), levelup = false, coins = this.spins * levelMult;\r\n\r\n        if (this.spins >= this.nextLevel) {\r\n            levelup = true;\r\n        }\r\n\r\n        controlls.endScreen.runEndScreen(this.spins, this.bestSpins, levelMult, coins, () => this.endCb(coins, this.bestSpins, levelup));\r\n    },\r\n    update: function (delta) {\r\n        delta = delta * 0.001;\r\n\r\n        // recalculate speed\r\n        this._updateSpeed(delta);\r\n\r\n        // calculate spins\r\n        this._updateSpins(delta);\r\n\r\n        // \r\n        this._updateSound();\r\n\r\n        // show end button ? \r\n        this._updateUI();\r\n\r\n        // resolve game end\r\n        this._resolveGameEnd();\r\n\r\n    },\r\n    _updateSpeed: function (delta) {\r\n        this.speed -= (delta * SPEED_DECOY)//  + this.speed * (5 - Math.log(10 + this.inertia)) * delta * 0.03;\r\n        if (Math.abs(this.speed) < 5 || this.speed < 0) {\r\n            this.speed = 0;\r\n        }\r\n    },\r\n    _updateSpins: function (delta) {\r\n        this.spins += (delta * Math.abs(this.speed)) / 60;\r\n    },\r\n    _updateUI: function () {\r\n        controlls.speedMeterUI.setSpeed(this.speed);\r\n\r\n        var progress = this.spins > 0 ? this.spins / this.nextLevel * 100 : 0;\r\n        controlls.spinsCounterUI.setSpinsCount(this.spins, progress);\r\n\r\n        // set level up\r\n        if (progress > 100) {\r\n            controlls.spinsCounterUI.setLevelMultiplier(Math.pow(2, this.level + 1));\r\n        }\r\n\r\n        var deg = -(this.spins - Math.floor(this.spins)) * 360 * Math.sign(this.speed);\r\n        spinner.render(deg, this.speed);\r\n    },\r\n    _resolveGameEnd: function () {\r\n        if (this.speed === 0) {\r\n            this.end();\r\n        }\r\n    },\r\n    _updateSound: function () {\r\n        audio.setRate(this.speed);\r\n    }\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Game.js\n// module id = 0\n// module chunks = 0","import { SPIN_ATTEMPTS } from \"./../Game.js\"\r\n\r\nvar GLOBAL_WRAPPER_ID = \"game-wrapper\";\r\nvar OVERLAY_ID = \"game-overlay\";\r\nvar OVERLAY_WRAPPER_ID = \"overlay-wrapper\";\r\nvar GLOBAL_WRAPPER_SIZE_Y = 1136;\r\nvar GLOBAL_WRAPPER_SIZE_X = 640;\r\n\r\nvar globalWrapperEl = document.getElementById(GLOBAL_WRAPPER_ID);\r\nvar overlayWrapperEl = document.getElementById(OVERLAY_WRAPPER_ID);\r\nvar overlayEl = document.getElementById(OVERLAY_ID);\r\n\r\nexport var resetAll = function () {\r\n    //globalWrapperEl.innerHTML = \"\";\r\n    //overlayWrapperEl.innerHTML = \"\";\r\n    //overlayEl.innerHTML = \"\";\r\n}\r\n\r\n// transform based on device given size\r\nexport var prepareScreen = function (currentLevel, currentCoins) {\r\n\r\n    // current coins\r\n    coinsUI.setCoins(currentCoins);\r\n    spinsCounterUI.setLevelMultiplier(currentLevel);\r\n\r\n    // current level\r\n\r\n\r\n    // window size\r\n    var scale = window.innerHeight / GLOBAL_WRAPPER_SIZE_Y;\r\n    var shiftX = (window.innerWidth - scale * GLOBAL_WRAPPER_SIZE_X) * 0.5\r\n\r\n    var transformWrappers = [overlayWrapperEl, globalWrapperEl];\r\n\r\n    for (var i = 0; i < transformWrappers.length; i++) {\r\n        transformWrappers[i].style.WebkitTransform = `scale(${scale})`;\r\n        transformWrappers[i].style.msTransform = `scale(${scale})`;\r\n        transformWrappers[i].style.transform = `scale(${scale})`;\r\n        transformWrappers[i].style.transformOrigin = `left top`;\r\n        transformWrappers[i].style.marginLeft = `${shiftX}px`;\r\n    }\r\n\r\n    globalWrapperEl.style.display = \"block\";\r\n};\r\n\r\nexport var endScreen = (function () {\r\n    var collectCb = null;\r\n\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"end-screen ui-text\";\r\n\r\n    // top screen content\r\n\r\n    var spinsMajorEl = document.createElement(\"span\");\r\n    spinsMajorEl.className = \"font-180 font-white line-160\";\r\n\r\n    var spinsBestEl = document.createElement(\"span\");\r\n\r\n    var topScreenEl = document.createElement(\"p\");\r\n    topScreenEl.className = \"font-white\";\r\n    topScreenEl.innerText = \"SPINS:\"\r\n    topScreenEl.appendChild(document.createElement(\"br\"));\r\n    topScreenEl.appendChild(spinsMajorEl);\r\n    topScreenEl.appendChild(document.createElement(\"br\"));\r\n    var spanHelperEl = document.createElement(\"span\");\r\n    spanHelperEl.className = \"font-purple\";\r\n    spanHelperEl.appendChild(document.createTextNode(\"BEST: \"));\r\n    spanHelperEl.appendChild(spinsBestEl);\r\n    topScreenEl.appendChild(spanHelperEl);\r\n    wrapperEl.appendChild(topScreenEl);\r\n\r\n    var hrEl = document.createElement(\"div\");\r\n    hrEl.className = \"hr-yellow\"\r\n    wrapperEl.appendChild(hrEl);\r\n\r\n    // bottom screen content\r\n    var spinsMinorEl = document.createElement(\"span\");\r\n    spinsMinorEl.className = \"font-80 font-white spins-minor\";\r\n\r\n    var levelMultiplierEl = document.createElement(\"span\");\r\n    levelMultiplierEl.className = \"font-white level-multiplier\";\r\n\r\n    var coinstToCollectEl = document.createElement(\"span\");\r\n    coinstToCollectEl.className = \"font-70 coin-text\";\r\n\r\n    var collectButtonEl = document.createElement(\"button\");\r\n    collectButtonEl.className = \"button-collect button-large\";\r\n\r\n    var botScreenEl = document.createElement(\"p\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.innerText = \"REWARD:\"\r\n    botScreenEl.appendChild(document.createElement(\"br\"));\r\n    wrapperEl.appendChild(botScreenEl);\r\n    botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.appendChild(spinsMinorEl);\r\n    botScreenEl.appendChild(levelMultiplierEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n    botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.className = \"button-collect-wrapper\";\r\n    var coinIconEl = document.createElement(\"span\");\r\n    coinIconEl.className = \"coin-icon\";\r\n    botScreenEl.appendChild(coinIconEl);\r\n    botScreenEl.appendChild(coinstToCollectEl);\r\n    botScreenEl.appendChild(collectButtonEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n\r\n\r\n    return {\r\n        runEndScreen: function (spins, bestSpins, levelMultiplier, total, collectCb) {\r\n            overlayWrapperEl.innerHTML = \"\";\r\n            overlayWrapperEl.appendChild(wrapperEl);\r\n\r\n            overlayWrapperEl.style.display = \"block\";\r\n            overlayEl.style.display = \"block\";\r\n            wrapperEl.style.display = \"block\";\r\n            spinsMajorEl.innerText = Math.floor(spins);\r\n            spinsBestEl.innerText = Math.floor(bestSpins);\r\n\r\n            spinsMinorEl.innerText = Math.floor(spins);\r\n            levelMultiplierEl.innerText = \"x\" + Math.floor(levelMultiplier);\r\n            coinstToCollectEl.innerText = renderTriNumber(total);\r\n\r\n            var newButton = collectButtonEl.cloneNode(true);\r\n            collectButtonEl.parentNode.replaceChild(newButton, collectButtonEl);\r\n            collectButtonEl = newButton;\r\n            collectButtonEl.addEventListener(\"click\", function () {\r\n                overlayWrapperEl.style.display = \"none\";\r\n                overlayEl.style.display = \"none\";\r\n                wrapperEl.style.display = \"none\";\r\n                collectCb();\r\n            }, false);\r\n            // collectButtonEl.parentNode.replaceChild(newButton, collectButtonEl);\r\n        }\r\n    };\r\n})();\r\n\r\n\r\nexport var spinsCounterUI = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"spins-counter ui-text\";\r\n\r\n    var spinsCountWrapperEl = document.createElement(\"div\");\r\n    spinsCountWrapperEl.className = \"spins-count\";\r\n\r\n    var spinsCounterOverlay = document.createElement(\"div\");\r\n    spinsCounterOverlay.className = \"spins-counter-overlay\";\r\n\r\n    var fillBarEl = document.createElement(\"div\");\r\n    fillBarEl.className = \"fill-bar\";\r\n\r\n    var fillBarProgressEl = document.createElement(\"div\");\r\n    fillBarProgressEl.className = \"fill-bar-progress\";\r\n\r\n    var levelMultiplierEl = document.createElement(\"span\");\r\n    levelMultiplierEl.className = \"level-mult\";\r\n\r\n    var descEl = document.createElement(\"span\");\r\n    descEl.innerText = \"SPINS:\";\r\n    descEl.className = \"spins-actual-desc\";\r\n\r\n    var spinsCountEl = document.createElement(\"span\");\r\n    spinsCountEl.className = \"spins-actual\";\r\n\r\n    spinsCountWrapperEl.appendChild(descEl);\r\n    spinsCountWrapperEl.appendChild(document.createElement(\"br\"));\r\n    spinsCountWrapperEl.appendChild(spinsCountEl);\r\n\r\n    fillBarEl.appendChild(fillBarProgressEl);\r\n\r\n    wrapperEl.appendChild(fillBarEl);\r\n    wrapperEl.appendChild(spinsCountWrapperEl);\r\n    wrapperEl.appendChild(levelMultiplierEl);\r\n    wrapperEl.appendChild(spinsCounterOverlay);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setSpinsCount: function (spins, barProgress) {\r\n            spinsCountEl.innerText = Math.floor(spins);\r\n            fillBarProgressEl.style.width = barProgress + \"%\";\r\n        },\r\n        setLevelMultiplier: function (mult) {\r\n            levelMultiplierEl.innerText = \"x\" + mult;\r\n        },\r\n    };\r\n})();\r\n\r\nexport var speedMeterUI = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"speed-meter ui-text\";\r\n\r\n    var speedEl = document.createElement(\"span\");\r\n    speedEl.innerText = \"0\";\r\n    speedEl.className = \"font-36\";\r\n\r\n    var speedIcoEl = document.createElement(\"img\");\r\n    speedIcoEl.className = \"speed-ico\";\r\n    speedIcoEl.src = \"assets/ui/rev_icon.png\";\r\n\r\n    wrapperEl.appendChild(speedEl);\r\n    wrapperEl.appendChild(speedIcoEl);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setSpeed: function (speed) {\r\n            speedEl.innerText = Math.round(speed);\r\n        }\r\n    };\r\n})();\r\n\r\nexport var upgradeUI = (function () {\r\n\r\n    // upgrade screen\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"upgrade-screen ui-text\";\r\n\r\n    // close button\r\n    var closeEl = document.createElement(\"div\");\r\n    closeEl.className = \"close-button\";\r\n    closeEl.addEventListener(\"click\", function () {\r\n        overlayWrapperEl.style.display = \"none\";\r\n        overlayEl.style.display = \"none\";\r\n        wrapperEl.style.display = \"none\";\r\n\r\n        var coinsEl = coinsUI.getWrapper();\r\n        globalWrapperEl.appendChild(coinsEl);\r\n    });\r\n    wrapperEl.appendChild(closeEl);\r\n\r\n\r\n    // upgrade text\r\n\r\n    var upgradeTextEl = document.createElement(\"p\");\r\n    upgradeTextEl.className = \"font-70 upgrade-header\";\r\n    upgradeTextEl.innerText = \"UPGRADES\";\r\n\r\n    wrapperEl.appendChild(upgradeTextEl);\r\n\r\n\r\n    // upgrade buttons\r\n    var upgradeList = [\"more speed\", \"longer spins\", \"time reward\"];\r\n    var iconList = [\"rev_icon.png\", \"spins_icon.png\", \"time_icon.png\"];\r\n    var costList = [];\r\n    var levelList = [];\r\n    var costButtonsList = [];\r\n\r\n    for (var i = 0; i < upgradeList.length; i++) {\r\n\r\n        var coinstToCollectEl = document.createElement(\"span\");\r\n        coinstToCollectEl.className = \"font-40 upgrade-text\";\r\n        coinstToCollectEl.innerText = upgradeList[i];\r\n\r\n        var upgradeIcoEl = document.createElement(\"img\");\r\n        upgradeIcoEl.src = \"assets/ui/\" + iconList[i];\r\n\r\n        var levelWrapperEl = document.createElement(\"span\");\r\n        levelWrapperEl.className = \"upgrade-level-wrapper font-60\";\r\n\r\n        var levelEl = document.createElement(\"span\");\r\n        levelEl.className = \"upgrade-level\";\r\n        levelList.push(levelEl);\r\n\r\n        levelWrapperEl.appendChild(document.createTextNode(\" \"));\r\n        levelWrapperEl.appendChild(levelEl);\r\n\r\n\r\n        var upgradeButtonEl = document.createElement(\"button\");\r\n        upgradeButtonEl.className = \"button-upgrade button-large\";\r\n\r\n        var coinIconEl = document.createElement(\"span\");\r\n        coinIconEl.className = \"coin-icon\";\r\n        // upgradeButtonEl.appendChild(coinIconEl);\r\n\r\n        var costValueEl = document.createTextNode(\"\");\r\n        upgradeButtonEl.appendChild(costValueEl);\r\n        costList.push(costValueEl);\r\n\r\n        costButtonsList.push(upgradeButtonEl);\r\n\r\n        var botScreenEl = document.createElement(\"div\");\r\n        botScreenEl.className = \"font-white\";\r\n        botScreenEl.className = \"button-upgrade-wrapper\";\r\n        botScreenEl.appendChild(coinstToCollectEl);\r\n        botScreenEl.appendChild(document.createElement(\"br\"));\r\n        botScreenEl.appendChild(upgradeIcoEl);\r\n        botScreenEl.appendChild(levelWrapperEl);\r\n        botScreenEl.appendChild(upgradeButtonEl);\r\n        wrapperEl.appendChild(botScreenEl);\r\n    }\r\n\r\n\r\n\r\n    // upgrade icon\r\n    var upgradeIcoEl = document.createElement(\"div\");\r\n    upgradeIcoEl.className = \"upgrade-ico\";\r\n    upgradeIcoEl.addEventListener(\"click\", function () {\r\n        overlayWrapperEl.innerHTML = \"\";\r\n        var coinsEl = coinsUI.getWrapper();\r\n        overlayWrapperEl.appendChild(coinsEl);\r\n\r\n        overlayWrapperEl.appendChild(wrapperEl);\r\n        overlayWrapperEl.style.display = \"block\";\r\n        overlayEl.style.display = \"block\";\r\n        wrapperEl.style.display = \"block\";\r\n    }, false);\r\n\r\n    globalWrapperEl.appendChild(upgradeIcoEl);\r\n\r\n    return {\r\n        updateCost: function (speed, intertia, timeReward) {\r\n            costList[0].textContent = renderTriNumber(speed);\r\n            costList[1].textContent = renderTriNumber(intertia);\r\n            costList[2].textContent = renderTriNumber(timeReward);\r\n        },\r\n        updateAvailability: function (speed, intertia, timeReward) {\r\n            speed === false ? costButtonsList[0].disabled = true : costButtonsList[0].disabled = false;\r\n            intertia === false ? costButtonsList[1].disabled = true : costButtonsList[1].disabled = false;\r\n            timeReward === false ? costButtonsList[2].disabled = true : costButtonsList[2].disabled = false;\r\n        },\r\n        bindUpgradeCallbacks: function (speed, intertia, timeReward) {\r\n            costButtonsList[0].addEventListener(\"click\", speed);\r\n            costButtonsList[1].addEventListener(\"click\", intertia);\r\n            costButtonsList[2].addEventListener(\"click\", timeReward);\r\n        },\r\n        updateLevel: function (speed, intertia, timeReward) {\r\n            levelList[0].textContent = speed;\r\n            levelList[1].textContent = intertia;\r\n            levelList[2].textContent = timeReward;\r\n        }\r\n    };\r\n})();\r\n\r\nexport var slideAreaUI = (function () {\r\n    var slideAreaEl = document.createElement(\"div\");\r\n    slideAreaEl.className = \"slide-area\";\r\n\r\n    document.body.appendChild(slideAreaEl);\r\n\r\n\r\n    var obj = {\r\n        registerSlide: function (cb) {\r\n            swipe(slideAreaEl, cb);\r\n        },\r\n        slideAreaEl: slideAreaEl\r\n    };\r\n\r\n    return obj;\r\n})();\r\n\r\nexport var coinsUI = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"coins-total ui-text\";\r\n\r\n    var coinsEl = document.createElement(\"span\");\r\n    coinsEl.innerText = \"0\";\r\n    coinsEl.className = \"font-36 font-yellow\";\r\n\r\n    var coinsIcoEl = document.createElement(\"img\");\r\n    coinsIcoEl.className = \"coins-ico\";\r\n    coinsIcoEl.src = \"assets/ui/coin.png\";\r\n\r\n    wrapperEl.appendChild(coinsIcoEl);\r\n    wrapperEl.appendChild(coinsEl);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setCoins: function (coins) {\r\n            coinsEl.innerText = renderTriNumber(coins);\r\n        },\r\n        getWrapper: function () {\r\n            return wrapperEl;\r\n        }\r\n    };\r\n})();\r\n\r\n\r\nexport var hintHand = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"hint-hand-wrapper\";\r\n\r\n    var handIcoEl = document.createElement(\"span\");\r\n    handIcoEl.className = \"hint-hand-ico\";\r\n\r\n    var spinsRemainEl = document.createElement(\"span\");\r\n    spinsRemainEl.className = \"hint-spins-remain ui-text\";\r\n\r\n    wrapperEl.appendChild(handIcoEl);\r\n    wrapperEl.appendChild(spinsRemainEl);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setSpinsRemain: function (spinsRemain) {\r\n            var innerText = `/${SPIN_ATTEMPTS}`;\r\n            spinsRemainEl.innerText = spinsRemain + innerText;\r\n        }\r\n    };\r\n})();\r\n\r\nfunction swipe(element, callback) {\r\n\r\n    var clientWidth = element.clientWidth;\r\n\r\n    var context = {\r\n        xDown: null,\r\n        startTime: null,\r\n        xLast: null\r\n    };\r\n\r\n    element.addEventListener('touchstart', handleTouchStart.bind(context), false);\r\n    element.addEventListener('mousedown', handleMouseStart.bind(context), false);\r\n\r\n    element.addEventListener('touchend', handleTouchEnd.bind(context), false);\r\n    element.addEventListener('touchout', handleTouchEnd.bind(context), false);\r\n    element.addEventListener('touchmove', handleTouchMove.bind(context), false);\r\n\r\n    element.addEventListener('mouseup', handleMouseEnd.bind(context), false);\r\n    element.addEventListener('mouseout', handleMouseEnd.bind(context), false);\r\n\r\n\r\n    function handleTouchStart(evt) {\r\n        this.xDown = evt.touches[0].clientX;\r\n        this.startTime = performance.now();\r\n    }\r\n\r\n    function handleMouseStart(evt) {\r\n        this.xDown = evt.clientX;\r\n        this.startTime = performance.now();\r\n    }\r\n\r\n    function handleTouchMove(evt) {\r\n        this.xLast = evt.touches[0].clientX;\r\n    }\r\n\r\n    function handleTouchEnd(evt) {\r\n        if (context.xDown !== null)\r\n            resolveSlide.call(this, this.xLast);\r\n    }\r\n\r\n    function handleMouseEnd(evt) {\r\n        if (context.xDown !== null)\r\n            resolveSlide.call(this, evt.clientX);\r\n    }\r\n\r\n    function resolveSlide(xEnd) {\r\n\r\n        var endTime = performance.now();\r\n\r\n        var distance = (xEnd - this.xDown) / clientWidth;\r\n        var time = endTime - this.startTime;\r\n        if (distance / time > 0.001) {\r\n            callback(endTime - this.startTime, (xEnd - this.xDown) / clientWidth);\r\n        }\r\n        this.xDown = null;\r\n        this.startTime = null;\r\n    }\r\n}\r\n\r\nfunction renderTriNumber(amount) {\r\n\r\n    amount = Math.floor(amount);\r\n\r\n    var i, units = [\"\", \"k\", \"M\", \"B\", \"T\"];\r\n    for (i = 0; i < units.length; i++) {\r\n        if (amount * 0.001 < 1)\r\n            break;\r\n\r\n        amount = amount * 0.001;\r\n    }\r\n    amount = parseInt(Math.floor(amount * 10)) / 10;\r\n    return amount + units[i];\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ui/controlls.js\n// module id = 1\n// module chunks = 0","var GameeConnector = function (Game) {\r\n    this.sound = false;\r\n    this.controller = null;\r\n    this.gameInstance = null;\r\n    this.Game = Game;\r\n    this._initGame();\r\n};\r\n\r\nGameeConnector.prototype = {\r\n    _initGame: function () {\r\n        var controllerType = 'FullScreen',\r\n            controllerOpts = {},\r\n            capabilities = [];\r\n\r\n        // before your game calls gamee.gameInit, it must be able to accept mute and unmute command\r\n        // but your game MUST NOT play any sound durring this phase\r\n        gamee.emitter.addEventListener(\"mute\", function (ev) {\r\n            try {\r\n                this.gameInstance.setSound(false);\r\n            } catch (e) {\r\n                // game instance doesnt exist yet\r\n                this.sound = false;\r\n            }\r\n        }.bind(this));\r\n\r\n        gamee.emitter.addEventListener(\"unmute\", function (ev) {\r\n            try {\r\n                this.gameInstance.setSound(true);\r\n            } catch (e) {\r\n                // game instance doesnt exist yet\r\n                this.sound = true;\r\n            }\r\n        }.bind(this));\r\n\r\n\r\n        gamee.emitter.addEventListener(\"pause\", function (ev) {\r\n            try {\r\n                this.gameInstance.pause();\r\n            } catch (e) {\r\n            }\r\n        }.bind(this));\r\n\r\n        gamee.emitter.addEventListener(\"resume\", function (ev) {\r\n            try {\r\n                this.gameInstance.resume();\r\n            } catch (e) {\r\n            }\r\n        }.bind(this));\r\n\r\n        // calling init\r\n        // in this phase, your game notifies platform what kind of controller it uses and what capabilities it has\r\n        gamee.gameInit(controllerType, controllerOpts, capabilities, this._initGameCb.bind(this));\r\n    },\r\n    _initGameCb: function (data) {\r\n        // callback for gameInit\r\n        // response for gameInit contains requested controller instance, some other data based on capabilities and sound otpion\r\n        this.controller = data.controller;\r\n        this.sound = data.sound;\r\n        this.data = data;\r\n\r\n        // now your game can setup assets and other stuff\r\n        // durring this phase, gamee.loadingProgress(int) to notify platform about preparation progress\r\n        // durring this phase, your game is allowed to play sound\r\n\r\n        // once preparation is ready, continue\r\n        this._gameReady();\r\n    },\r\n    _gameReady: function () {\r\n\r\n        // before you continue, you must be able to accept gameStart command\r\n        gamee.emitter.addEventListener(\"start\", this.gameStart.bind(this));\r\n\r\n        // calling gamee.gameReady\r\n        // this method will notify platform, your game is ready to accept gameStart command\r\n        // gamee.gameReady(this._gameReadyCb.bind(this));\r\n        gamee.gameReady();\r\n    },\r\n    _gameReadyCb: function () {\r\n        // there you won't get any data\r\n    },\r\n    gameStart: function (ev) {\r\n        if (this.gameInstance !== null) {\r\n            this.gameInstance.forceEnd();\r\n        } else {\r\n            this.gameInstance = new this.Game(this.sound, this.controller, this.data);\r\n        }\r\n        // when you start new game instance, you will probably want to pass some parameters based on:\r\n        // type of game should run (is it first game? did player died already?)\r\n        // call signature might differ a lot,\r\n        // this is just sample how it could look like:\r\n\r\n        // this.gameInstance = new this.Game(this.sound, this.controller);\r\n        // once game is ready, you must call callback\r\n        // this is standart CustomEvent instance, callback is property of event.detail\r\n        ev.detail.callback();\r\n    }\r\n};\r\n\r\nexport var createGameeConnector = function (Game) {\r\n    new GameeConnector(Game);\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/gamee/GameeConnector.js\n// module id = 2\n// module chunks = 0","import { slideAreaUI } from \"./ui/controlls.js\"\r\n\r\n\r\nvar SOUND_SOURCE = \"assets/audio/63532__florian-reinke__click2.mp3\";\r\n\r\nvar Audio = function () {\r\n    this.isPlaying = false;\r\n    this._init();\r\n};\r\n\r\nAudio.prototype = {\r\n    _init: function () {\r\n        this.sound = new Howl({\r\n            src: [SOUND_SOURCE],\r\n            loop: true,\r\n            preload: true,\r\n            volume: 1,\r\n            rate: 1,\r\n            autoplay: false\r\n        });\r\n    },\r\n    start: function (opt_rate) {\r\n        opt_rate = opt_rate || 0;\r\n        this.setRate(opt_rate);\r\n        try {\r\n            this.sound.stop();\r\n        } catch (e) { }\r\n        this.sound.play();\r\n        this.isPlaying = true;\r\n    },\r\n    mute: function (mute) {\r\n        this.sound.mute(mute);\r\n    },\r\n    pause: function (pause) {\r\n        if (pause) {\r\n            this.sound.pause();\r\n        } else if (this.isPlaying) {\r\n            this.sound.play();\r\n        }\r\n    },\r\n    stop: function () {\r\n        this.sound.stop();\r\n        this.isPlaying = false;\r\n    },\r\n    setRate: function (rate) {\r\n\r\n        rate = rate * 0.05; // 60/3\r\n\r\n\r\n        rate *= this.sound.duration();\r\n\r\n        rate = Math.min(7.1, rate);\r\n        rate = Math.max(0.1, rate);\r\n\r\n        this.sound.rate(rate);\r\n    }\r\n};\r\n\r\nexport var audio = new Audio();\r\n\r\n// Unlock audio for mobile platforms\r\n(function () {\r\n\r\n    var unlockAudioListener;\r\n\r\n    unlockAudioListener = function () {\r\n\r\n        var myContext = new AudioContext();\r\n\r\n        // create empty buffer\r\n        var buffer = myContext.createBuffer(1, 1, 22050);\r\n        var source = myContext.createBufferSource();\r\n        source.buffer = buffer;\r\n\r\n        // connect to output (your speakers)\r\n        source.connect(myContext.destination);\r\n\r\n        // play the file\r\n        if (!source.start)\r\n            source.start = source.noteOn;\r\n        source.start(0);\r\n\r\n        try {\r\n            window.removeEventListener('touchstart', unlockAudioListener);\r\n            document.body.removeEventListener('touchstart', unlockAudioListener);\r\n            slideAreaUI.slideAreaEl.removeEventListener('touchstart', unlockAudioListener);\r\n        } catch (e) {\r\n\r\n        }\r\n    };\r\n\r\n    window.addEventListener('touchstart', unlockAudioListener, true);\r\n    document.body.addEventListener('touchstart', unlockAudioListener, true);\r\n    slideAreaUI.slideAreaEl.addEventListener('touchstart', unlockAudioListener, true);\r\n})();\r\n\r\n(function () {\r\n    var ctx = null, usingWebAudio = true;\r\n\r\n    try {\r\n        if (typeof AudioContext !== 'undefined') {\r\n            ctx = new AudioContext();\r\n        } else if (typeof webkitAudioContext !== 'undefined') {\r\n            ctx = new webkitAudioContext();\r\n        } else {\r\n            usingWebAudio = false;\r\n        }\r\n    } catch (e) {\r\n        usingWebAudio = false;\r\n    }\r\n\r\n    // context state at this time is `undefined` in iOS8 Safari\r\n    if (usingWebAudio && ctx.state === 'suspended') {\r\n        var resume = function () {\r\n            ctx.resume();\r\n\r\n            setTimeout(function () {\r\n                if (ctx.state === 'running') {\r\n                    document.body.removeEventListener('touchend', resume, false);\r\n                }\r\n            }, 0);\r\n        };\r\n\r\n        document.body.addEventListener('touchend', resume, false);\r\n    }\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Audio.js\n// module id = 3\n// module chunks = 0","export var Chronos = function () {\r\n    this.listeners = [];\r\n    this._init();\r\n};\r\n\r\nChronos.prototype = {\r\n    _init: function () {\r\n        this.timeRunning = 0;\r\n        this.timeMod = 1;\r\n    },\r\n    registerListener: function (listener) {\r\n        this.listeners.push(listener);\r\n    },\r\n    prependListener: function (listener) {\r\n        this.listeners.unshift(listener);\r\n    },\r\n    removeListener: function (listener) {\r\n        var i;\r\n\r\n        for (i = 0; i < this.listeners.length; i++) {\r\n            if (listener === this.listeners[i]) {\r\n                this.listeners.splice(i);\r\n                continue;\r\n            }\r\n        }\r\n    },\r\n    update: function (deltaTime) {\r\n        var i;\r\n\r\n        deltaTime = deltaTime * this.timeMod;\r\n        this.timeRunning += deltaTime;\r\n\r\n        for (i = 0; i < this.listeners.length; i++)\r\n            this.listeners[i].update(deltaTime);\r\n    },\r\n    setUpdating: function (updating) {\r\n        if (updating) {\r\n            delete this.update;\r\n        } else {\r\n            this.update = function () { };\r\n        }\r\n    }\r\n};\r\n\r\nexport var createChronos = function () {\r\n    return new Chronos();\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Chronos.js\n// module id = 4\n// module chunks = 0","import { createGameeConnector } from \"./gamee/GameeConnector.js\"\r\nimport { Game } from \"./Game.js\"\r\n\r\ncreateGameeConnector(Game);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 5\n// module chunks = 0","var GLOBAL_WRAPPER_ID = \"game-wrapper\";\r\nvar MAX_OPACITY_MULT = 0.7;\r\n\r\nvar SPINNER_IMG = {\r\n    stage0: \"assets/spinners/spiner_stage0.png\",\r\n    stage1: \"assets/spinners/spiner_stage1.png\",\r\n    stage2: \"assets/spinners/spiner_stage2.png\",\r\n    stage3: \"assets/spinners/spiner_stage3.png\",\r\n    middle: \"assets/spinners/spiner_center.png\"\r\n};\r\n\r\nvar STAGE_REACH = {\r\n\r\n};\r\n\r\nvar globalWrapperEl = document.getElementById(GLOBAL_WRAPPER_ID);\r\nvar ctx = null;\r\nvar canvas, imgs, img,\r\n    hRatio, vRatio, ratio, centerShift_x, centerShift_y;\r\n\r\nfunction loadImages() {\r\n\r\n    var counter = 0,\r\n        total = 0;\r\n\r\n    imgs = {};\r\n    for (var key in SPINNER_IMG) {\r\n        total++;\r\n        loadImage(SPINNER_IMG[key], key, function () {\r\n            counter++;\r\n            if (counter !== total)\r\n                return;\r\n\r\n            img = imgs.stage0;\r\n            hRatio = canvas.width / img.width;\r\n            vRatio = canvas.height / img.height;\r\n            ratio = Math.min(hRatio, vRatio);\r\n            centerShift_x = (canvas.width - img.width * ratio) / 2;\r\n            centerShift_y = (canvas.height - img.height * ratio) / 2;\r\n\r\n            render(0, 0);\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction loadImage(path, name, cb) {\r\n    var img = document.createElement(\"img\");\r\n    img.onload = function () {\r\n        imgs[name] = img;\r\n        cb();\r\n    }\r\n    img.src = path;\r\n}\r\n\r\n(function () {\r\n    canvas = document.createElement(\"canvas\");\r\n    canvas.id = \"spinner-ctx\";\r\n    canvas.width = 640;\r\n    canvas.height = 640;\r\n    ctx = canvas.getContext(\"2d\");\r\n\r\n    globalWrapperEl.appendChild(canvas);\r\n    loadImages();\r\n})();\r\n\r\nexport var render = function (degrees, speed) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    var opacityMult = 0;\r\n\r\n    // if (speed > 1200) {\r\n    //     opacityMult = (speed - 1200) / 400;\r\n    //     renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage3);\r\n    //     renderSpinner(degrees, 1, imgs.stage2);\r\n    // } else if (speed > 800) {\r\n    //     opacityMult = (speed - 800) / 400;\r\n    //     renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage2);\r\n    //     renderSpinner(degrees, 1, imgs.stage1);\r\n    // } else if (speed > 400) {\r\n    //     opacityMult = (speed - 400) / 400;\r\n    //     renderSpinner(degrees + 120, opacityMult, imgs.stage1);\r\n    //     renderSpinner(degrees, 1, imgs.stage0);\r\n    // } else {\r\n    //     renderSpinner(degrees, 1, imgs.stage0);\r\n    // }\r\n\r\n    if (speed > 1200) {\r\n        opacityMult = (speed - 1200) / 400;\r\n        // renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage3);\r\n        // renderSpinner(degrees + 120, Math.max(0, 1 - opacityMult), imgs.stage2);\r\n        renderSpinner(degrees, 1, imgs.stage3);\r\n    } else if (speed > 800) {\r\n        opacityMult = (speed - 800) / 400;\r\n        // renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage2);\r\n        // renderSpinner(degrees + 120, Math.max(0, 1 - opacityMult), imgs.stage1);\r\n        renderSpinner(degrees, 1, imgs.stage2);\r\n    } else if (speed > 400) {\r\n        opacityMult = (speed - 400) / 400;\r\n        // renderSpinner(degrees + 120, opacityMult, imgs.stage1);\r\n        renderSpinner(degrees, 1, imgs.stage1);\r\n        renderSpinner(degrees, opacityMult * 0.5 + 0.5, imgs.stage2);\r\n    } else {\r\n        renderSpinner(degrees, 1, imgs.stage0);\r\n    }\r\n\r\n    renderSpinnerCenter();\r\n}\r\n\r\nfunction renderSpinner(degrees, opacity, targetImage) {\r\n\r\n    ctx.save();\r\n    ctx.translate(canvas.width / 2, canvas.height / 2);\r\n    ctx.rotate(degrees * Math.PI / 180);\r\n    ctx.translate(-canvas.width / 2, -canvas.height / 2);\r\n\r\n    ctx.globalAlpha = opacity;\r\n    ctx.drawImage(targetImage, 0, 0, targetImage.width, targetImage.height,\r\n        centerShift_x, centerShift_y, targetImage.width * ratio, targetImage.height * ratio);\r\n    ctx.globalAlpha = 1;\r\n    ctx.restore();\r\n}\r\n\r\nfunction renderSpinnerCenter() {\r\n    ctx.save();\r\n    img = imgs.middle;\r\n    ctx.drawImage(img, 0, 0, img.width, img.height,\r\n        centerShift_x, centerShift_y, img.width * ratio, img.height * ratio);\r\n    ctx.restore();\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ui/2dCanvas.js\n// module id = 6\n// module chunks = 0"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;;AChEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACndA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7HA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9CA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;ACHA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A","sourceRoot":""}